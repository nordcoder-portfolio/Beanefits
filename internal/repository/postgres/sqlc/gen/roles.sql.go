// ErrCode generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: roles.sql

package gen

import (
	"context"
)

const addUserRole = `-- name: AddUserRole :exec
INSERT INTO user_roles (user_id, role_code)
VALUES ($1, $2)
`

type AddUserRoleParams struct {
	UserID   int64
	RoleCode string
}

func (q *Queries) AddUserRole(ctx context.Context, db DBTX, arg AddUserRoleParams) error {
	_, err := db.Exec(ctx, addUserRole, arg.UserID, arg.RoleCode)
	return err
}

const getRolesByUserID = `-- name: GetRolesByUserID :many
SELECT role_code
FROM user_roles
WHERE user_id = $1
ORDER BY role_code
`

func (q *Queries) GetRolesByUserID(ctx context.Context, db DBTX, userID int64) ([]string, error) {
	rows, err := db.Query(ctx, getRolesByUserID, userID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []string
	for rows.Next() {
		var role_code string
		if err := rows.Scan(&role_code); err != nil {
			return nil, err
		}
		items = append(items, role_code)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const removeUserRole = `-- name: RemoveUserRole :exec
DELETE FROM user_roles
WHERE user_id = $1 AND role_code = $2
`

type RemoveUserRoleParams struct {
	UserID   int64
	RoleCode string
}

func (q *Queries) RemoveUserRole(ctx context.Context, db DBTX, arg RemoveUserRoleParams) error {
	_, err := db.Exec(ctx, removeUserRole, arg.UserID, arg.RoleCode)
	return err
}
